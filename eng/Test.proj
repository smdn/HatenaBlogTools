<!--
SPDX-FileCopyrightText: 2022 smdn <smdn@smdn.jp>
SPDX-License-Identifier: MIT
-->
<!--
  This project file performs downloading packages defined by PackageDownload.
  Run `dotnet restore` to download the packages.
-->
<Project Sdk="Microsoft.Build.NoTargets/1.0.80">
  <!-- ref: https://learn.microsoft.com/en-us/nuget/consume-packages/packagedownload-functionality -->
  <PropertyGroup>
    <NoBuild>true</NoBuild>
    <TargetFramework>netstandard1.0</TargetFramework>
    <AutomaticallyUseReferenceAssemblyPackages>false</AutomaticallyUseReferenceAssemblyPackages>
  </PropertyGroup>

  <Target Name="GetRepositoryProperties_OSWindows_Git" BeforeTargets="Build">
    <Exec Command="&quot;$(ProgramFiles)\Git\cmd\git.exe&quot; branch --show-current" Condition="'$(RepositoryBranch)' == ''" ConsoleToMSBuild="true" EchoOff="true" StandardOutputImportance="Low">
      <Output TaskParameter="ConsoleOutput" PropertyName="RepositoryBranch" />
    </Exec>
    <Exec Command="&quot;$(ProgramFiles)\Git\cmd\git.exe&quot; rev-parse HEAD" Condition="'$(RepositoryCommit)' == ''" ConsoleToMSBuild="true" EchoOff="true" StandardOutputImportance="Low">
      <Output TaskParameter="ConsoleOutput" PropertyName="RepositoryCommit" />
    </Exec>
    <Warning Text="RepositoryBranch: $(RepositoryBranch)"/>
    <Warning Text="RepositoryCommit: $(RepositoryCommit)"/>
  </Target>
</Project>
